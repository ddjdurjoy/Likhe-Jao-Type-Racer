MASTER SETUP PROMPT (Use This First):

You are a senior full-stack web developer specializing in browser-based multiplayer games.

I want to build "Likhe Jao" - a typing racing game similar to NitroType with these requirements:

TECH STACK:
- Frontend: React 18 + Vite + Tailwind CSS
- State Management: Zustand (lightweight, simple)
- Real-time: Socket.io (free) or PeerJS (P2P)
- Database: Firebase Free Tier OR localStorage
- PWA: Full offline support + mobile installable
- Languages: English + Bangla (Bijoy layout)

CORE FEATURES:
âœ… Single-player with AI opponents
âœ… Real-time multiplayer (2-4 players)
âœ… Car selection & customization
âœ… Power-ups & obstacles
âœ… Leaderboards & achievements
âœ… Practice mode with categories
âœ… Difficulty levels
âœ… Theme system
âœ… Sound effects (Web Audio API)

CONSTRAINTS:
- 100% FREE technologies only
- No paid APIs or services
- Mobile-first responsive design
- Works offline after first load
- Max bundle size: 500KB

Your approach:
1. Explain architecture BEFORE code
2. Use modern React best practices
3. Write clean, commented, production-ready code
4. Suggest performance optimizations
5. Keep it beginner-friendly but scalable

Acknowledge when ready, then wait for Phase 1.

PHASE 1: Project Foundation:

Set up the complete project structure:

npx create vite@latest likhe-jao-type-racer --template react
cd likhe-jao-type-racer

Install dependencies:
- Tailwind CSS
- Zustand (state management)
- Socket.io-client
- Howler.js (sounds)
- Framer Motion (animations)
- React Router DOM

Create folder structure:
/src
  /components
    /game (RaceTrack, Car, TypingInput)
    /ui (Button, Modal, Navbar)
    /screens (Home, Race, Garage, Leaderboard)
  /hooks (useTyping, useRace, useMultiplayer)
  /stores (gameStore, userStore)
  /utils (typing-validator, bijoy-mapper)
  /assets (sounds, images)
  /data (words-english.js, words-bangla.js)
  /styles (tailwind.config.js)

/public
  manifest.json
  sw.js (service worker)
  icons/ (PWA icons)

Provide:
1. Complete package.json
2. Vite config with PWA plugin
3. Tailwind config with custom theme
4. Basic file structure
5. ESLint + Prettier config

PHASE 2: Core Typing Engine:

Create the core typing game engine using React hooks.

Build a custom hook: useTypingEngine

Features:
- Accept target text (array of words)
- Track current word index, character index
- Calculate WPM in real-time (formula: (chars typed / 5) / (seconds / 60))
- Calculate accuracy: (correct chars / total chars) * 100
- Handle backspace, space, and character input
- Support language switching (English/Bangla)
- Emit progress events for multiplayer sync

Zustand Store: gameStore
- raceState: 'waiting' | 'countdown' | 'racing' | 'finished'
- players: array of player objects
- raceProgress: percentage completion
- powerUps: active power-ups array

Components needed:
1. TypingInput - custom input component
2. WordDisplay - shows current word with highlighting
3. ProgressBar - visual race progress
4. StatsDisplay - WPM, accuracy, time

Provide full implementation with TypeScript types.

PHASE 3: Bangla (Bijoy) Integration:

Implement Bangla typing support with Bijoy keyboard layout.

Create utility: bijoyMapper.ts

Requirements:
- Key mapping function: mapBijoyKey(event)
- Converts English keypresses to Bangla Unicode
- Handle complex characters (conjuncts, vowel signs)
- Bidirectional text support
- Virtual keyboard overlay (optional visual helper)

Language toggle:
- Store in localStorage
- Global state in Zustand
- Smooth transition without page reload

Bangla word database:
- 500+ common Bangla words categorized by difficulty
- Sentences from literature, news, poetry
- Proper Unicode rendering

Provide:
1. Complete Bijoy keymap (JSON object)
2. Mapper utility functions
3. Language switcher component
4. Bangla word arrays by category
5. Font loading (@font-face for Bengali fonts)

Test with: "à¦†à¦®à¦¿ à¦¬à¦¾à¦‚à¦²à¦¾à¦¯à¦¼ à¦—à¦¾à¦¨ à¦—à¦¾à¦‡"

PHASE 4: Racing Visuals & Animations:

Create the racing track and car animations.

Tech: Framer Motion + CSS animations + Canvas (optional)

Components:
1. RaceTrack
   - Multi-lane perspective road
   - Parallax scrolling background
   - Start/finish line animations
   - Position markers (1st, 2nd, 3rd, 4th)

2. Car Component
   - 10 unique car designs (SVG or CSS)
   - Smooth movement based on progress
   - Wheel rotation animation
   - Exhaust particle effects
   - Speed lines when boosting

3. AnimatedBackground
   - Day/night cycle
   - Moving clouds
   - Trees, buildings (parallax)
   - Weather effects (optional)

Performance optimization:
- Use CSS transforms (translate3d) for 60fps
- RequestAnimationFrame for smooth updates
- GPU acceleration with will-change
- Debounce position updates (16ms max)

Provide car designs as Tailwind CSS classes or inline SVG.

PHASE 5: Sound System (Web Audio API):

Create a complete sound system using Web Audio API.

Build: SoundManager class

Generate sounds programmatically:
1. Engine hum (oscillator with frequency modulation)
2. Keypress click (short sine wave burst)
3. Error buzz (dissonant tone)
4. Power-up pickup (ascending arpeggio)
5. Race countdown (beep sequence)
6. Victory fanfare (chord progression)
7. Background ambient music (looping)

Features:
- Volume control (0-100%)
- Mute toggle
- Sound pooling for performance
- Fade in/out transitions
- Spatial audio (optional)

Howler.js integration:
- For complex sounds (optional MP3s)
- Sprite sheets for efficiency
- Cross-browser compatibility

Provide:
1. SoundManager utility class
2. Audio generation functions
3. React hook: useSound
4. Volume control component
5. No external audio files (all synthetic)

PHASE 6: AI Opponents:

Create intelligent AI racers with personalities.

AI Bot Class:
- 5 difficulty presets (30-100 WPM range)
- Typing simulation algorithm
- Random speed variations (Â±5 WPM)
- Occasional "mistakes" (speed drops)
- Rubber-banding (adjusts to player skill)

Bot Personalities:
1. "Speedy" - Fast but error-prone
2. "Steady" - Consistent medium pace
3. "Professor" - Slow start, strong finish
4. "Rival" - Matches player's average WPM
5. "Rookie" - Beginner-friendly

Implementation:
- Use setInterval to simulate typing
- Progress calculation without actual text
- Emit position updates same as real players
- Visual indicators (AI badge)

Advanced: Adaptive difficulty
- Track player's last 5 races
- Adjust AI difficulty dynamically
- Create challenging but fair competition

Provide full AI engine with tunable parameters.

PHASE 7: Real-Time Multiplayer (FREE):

Implement multiplayer using Socket.io (free deployment on Render/Railway).

Server Setup (Node.js + Express):
- Lobby/room management
- Matchmaking queue
- Race state synchronization
- Handle disconnections gracefully
- Anti-cheat validation

Client Integration:
- Socket.io-client connection
- Room creation with unique code
- Join room by code
- Real-time position updates (throttled to 100ms)
- Latency compensation

Room Features:
- 2-4 players max per room
- Host controls (start race, settings)
- Ready/not ready status
- Simple text chat in lobby
- Countdown synchronization

Alternative: PeerJS (P2P, no server needed)
- Direct browser-to-browser
- One player acts as host
- Lower latency
- Free forever

Provide:
1. Server code (server.js)
2. Socket event handlers
3. Client connection logic
4. Room management UI
5. Deployment guide for Railway (free tier)

PHASE 8: Leaderboards & Progression:

Implement comprehensive player progression system.

Storage Strategy:
- localStorage for offline/local data
- Firebase Realtime Database (free tier) for global leaderboards
- Sync when online, work offline

Data Structure:
{
  userId: "unique-id",
  username: "player-name",
  stats: {
    totalRaces: 120,
    wins: 45,
    avgWPM: 67,
    bestWPM: 92,
    accuracy: 94.5,
    totalWords: 12450,
    playTime: 3600 // seconds
  },
  achievements: ["first-win", "speed-demon", ...],
  unlockedCars: [1, 2, 3, 5],
  selectedCar: 3,
  theme: "dark",
  language: "en"
}

Leaderboards:
- Global top 100 (all-time)
- Daily top 50
- Weekly top 50
- Friends leaderboard
- Filter by language & difficulty

Firebase Setup:
- Free Spark plan limits: 100 concurrent, 1GB storage
- Security rules for read/write
- Indexed queries for performance

Provide complete Firebase setup + localStorage fallback.

PHASE 9: Achievements & Badges:

Create a comprehensive achievement system (30+ achievements).

Categories:

SPEED ACHIEVEMENTS:
- "First Steps" - Reach 30 WPM
- "Speed Demon" - Reach 60 WPM  
- "Lightning Fingers" - Reach 80 WPM
- "Supersonic" - Reach 100 WPM
- "God Tier" - Reach 120 WPM

ACCURACY ACHIEVEMENTS:
- "Perfectionist" - 100% accuracy in a race
- "Consistent Pro" - 95%+ in 10 consecutive races
- "Error-Free Week" - 7 days with 98%+ average

MILESTONE ACHIEVEMENTS:
- "Century Club" - Complete 100 races
- "Marathon Master" - Type 50,000 words
- "Dedicated" - Play 50 hours total
- "Daily Grind" - 30-day login streak

SPECIAL ACHIEVEMENTS:
- "Polyglot" - Complete races in both languages
- "AI Destroyer" - Beat all AI on Expert
- "Multiplayer King" - Win 50 online races
- "Car Collector" - Unlock all cars
- "Theme Master" - Try all themes

Implementation:
- Achievement checking on race end
- Visual unlock animations
- Progress tracking for incremental achievements
- Badge showcase page
- Share on social media (optional)

Provide achievement data structure + checking logic.

PHASE 10: Power-Ups & Obstacles:

Add arcade-style game mechanics (optional, but fun!).

POWER-UPS (collect by typing special marked words):

1. ðŸš€ Nitro Boost
   - 2x speed for 5 seconds
   - Visual: flames from exhaust
   - Sound: engine roar

2. ðŸ›¡ï¸ Shield
   - Ignore next 3 mistakes
   - Visual: blue shield around car
   - Duration: 10 seconds

3. â° Time Freeze
   - Slow opponents by 50% for 5 seconds
   - Visual: slow-motion effect on others
   - Multiplayer: slight delay applied

4. âœ¨ Auto-Complete
   - Skip current word
   - Limited to 2 per race
   - Visual: word fades out

OBSTACLES (random events, harder difficulties):

1. ðŸŒ«ï¸ Fog
   - Text becomes slightly blurred
   - Duration: 8 seconds
   - CSS filter: blur(2px)

2. ðŸ›¢ï¸ Oil Spill
   - Backspace disabled temporarily
   - Duration: 5 seconds
   - Visual: slippery road effect

3. âš ï¸ Speed Bump
   - Progress slowed by 30%
   - Duration: 3 seconds
   - Visual: car bounces

Balancing:
- Power-ups spawn every 30-40 seconds
- Obstacles only on Medium/Hard difficulties
- Cannot be disabled in multiplayer (fairness)
- Visual indicators 2 seconds before spawn

Provide modular power-up system with easy extensibility.

PHASE 11: Theme System:

Create a comprehensive theme customization system.

8 Pre-built Themes:

1. Classic - Default light theme
2. Dark Mode - Modern dark UI
3. Neon Racer - Cyberpunk style
4. Sunset Drive - Orange/pink gradients
5. Ocean Breeze - Blue/teal tones
6. Forest Track - Green/brown nature
7. Retro Arcade - 8-bit pixel style
8. Midnight Purple - Deep purple/black

Implementation:
- CSS variables for colors
- Tailwind's dark mode support
- Smooth theme transitions
- localStorage persistence

Theme Structure:
{
  name: "Neon Racer",
  colors: {
    primary: "#ff00ff",
    secondary: "#00ffff",
    background: "#0a0a0a",
    text: "#ffffff",
    track: "#1a1a2e",
    accent: "#ff00aa"
  },
  fonts: {
    heading: "Orbitron",
    body: "Roboto"
  }
}

Advanced:
- Custom theme builder
- Import/export themes as JSON
- Community theme sharing
- Theme preview before applying

Provide theme switcher component + all theme definitions.

PHASE 12: PWA Setup & Mobile Optimization:

Convert the app into a full-featured Progressive Web App.

PWA Requirements:
1. manifest.json - app metadata
2. Service Worker - offline caching
3. Install prompt - custom UI
4. Splash screen - branded loading
5. Icons - 192x192, 512x512 (generate with https://realfavicongenerator.net)

manifest.json:
{
  "name": "Likhe Jao - Typing Race",
  "short_name": "Likhe Jao",
  "description": "Competitive typing racing game",
  "start_url": "/",
  "display": "standalone",
  "orientation": "portrait",
  "theme_color": "#4F46E5",
  "background_color": "#ffffff",
  "icons": [...]
}

Service Worker Strategy:
- Cache-first for assets (CSS, JS, images)
- Network-first for API calls
- Offline fallback page
- Update notification system

Mobile Optimizations:
- Touch-friendly buttons (44x44px minimum)
- Virtual keyboard handling
- Prevent zoom on input focus
- Optimized for 3G networks
- Reduced motion option
- Haptic feedback (vibration API)

Performance:
- Lighthouse score > 90
- First Contentful Paint < 1.5s
- Time to Interactive < 3s
- Bundle size < 500KB

Provide complete PWA setup with Vite PWA plugin.

PHASE 13: Practice Mode & Categories

Create a dedicated practice mode for skill improvement.

Practice Categories:

ENGLISH:
- Common Words (100 most frequent)
- Programming Terms (JavaScript, Python, etc.)
- Business Vocabulary
- Medical Terms
- Numbers & Symbols
- Quotes & Proverbs

BANGLA:
- Common Bengali Words
- Literature Excerpts (Tagore, Nazrul)
- News Headlines
- Poetry Lines
- Proverbs (à¦ªà§à¦°à¦¬à¦¾à¦¦)

Features:
- No timer pressure
- Instant feedback on mistakes
- Word difficulty rating
- Repeat difficult words
- Statistics per category
- Progress tracking

Custom Practice:
- Upload your own text
- Paste from clipboard
- Generate from topic (future: AI integration)

Components:
1. CategorySelector
2. PracticeSession
3. LetterDrills (a-z individual practice)
4. DetailedFeedback (mistake analysis)

Provide complete practice mode with word databases.

PHASE 14: Garage & Car System:

Create a car collection and customization system.

10 Unique Cars:

1. "Starter" - Free, balanced stats
2. "Speedster" - High speed, low acceleration
3. "Muscle" - High acceleration, slower top speed
4. "Classic" - Vintage style, balanced
5. "Sport" - Lightweight, agile
6. "Truck" - Slow but steady
7. "Racer" - Pro-level stats
8. "Cybertruck" - Futuristic design
9. "Formula" - Fastest car (unlock at 100 races)
10. "Golden" - Prestige car (unlock with achievement)

Car Stats (cosmetic, for fun):
- Speed: 1-10
- Acceleration: 1-10
- Handling: 1-10
- Rarity: Common, Rare, Epic, Legendary

Unlock System:
- Races completed
- WPM milestones
- Achievements
- Special events (future)

Visual Design:
- SVG-based car sprites
- Top-down view
- Animated wheels
- Exhaust effects
- Customizable colors (future)

Components:
1. GarageScreen - grid of cars
2. CarCard - individual car display
3. CarPreview - 3D-like rotation (CSS)
4. StatsDisplay - radar chart

Provide all car designs as Tailwind CSS or SVG.

PHASE 15: Testing & Polish:

Final testing, optimization, and polish phase.

Testing Checklist:
âœ… Cross-browser (Chrome, Firefox, Safari, Edge)
âœ… Mobile devices (iOS Safari, Android Chrome)
âœ… Offline functionality
âœ… Multiplayer with 4 players
âœ… All achievements triggering correctly
âœ… localStorage limits (< 5MB)
âœ… Firebase free tier limits
âœ… Performance (60fps, <100ms input lag)
âœ… Accessibility (keyboard navigation, screen readers)

Optimizations:
- Code splitting (React.lazy)
- Image optimization (WebP format)
- Font subset loading
- Debounce expensive operations
- Memoize React components
- Lazy load sounds until needed

UI/UX Polish:
- Loading skeletons
- Error boundaries
- Toast notifications
- Keyboard shortcuts (Space to start race, R to retry)
- Tooltips on first use
- Smooth page transitions
- Confirmation dialogs

Accessibility:
- ARIA labels
- Focus indicators
- High contrast mode
- Reduced motion support
- Font size adjustments

Documentation:
- README with setup instructions
- Code comments
- User guide (in-app tutorial)
- Keyboard shortcuts list

Provide final deployment checklist.

BONUS: Advanced Features (Future Enhancements):

Optional advanced features for v2.0:

1. **Tournaments**
   - Bracket-style competitions
   - Scheduled events
   - Prize system (badges, exclusive cars)

2. **Replay System**
   - Record races
   - Watch best performances
   - Learn from mistakes
   - Share replays

3. **Daily Challenges**
   - New challenge every day
   - Special rewards
   - Streak tracking
   - Global participation

4. **Friend System**
   - Add friends via code
   - Private rooms
   - Friend leaderboards
   - Challenge notifications

5. **AI Content Generation**
   - Generate practice texts from topics
   - Dynamic difficulty adjustment
   - Personalized learning paths

6. **Voice Commands**
   - Start race with voice
   - Accessibility feature
   - Web Speech API

7. **VR Mode**
   - Immersive racing experience
   - WebXR API
   - Experimental feature

8. **Streamer Mode**
   - Overlay for OBS
   - Twitch integration
   - Race highlights

These features can be added incrementally based on user feedback.

FINAL ARCHITECTURE OVERVIEW:

CLIENT (React + Vite)
â”œâ”€â”€ UI Layer (Components)
â”œâ”€â”€ State Management (Zustand)
â”œâ”€â”€ Game Engine (useTyping hook)
â”œâ”€â”€ Sound System (Web Audio API)
â”œâ”€â”€ Storage (localStorage + Firebase)
â””â”€â”€ PWA (Service Worker)

SERVER (Node.js + Socket.io)
â”œâ”€â”€ Room Management
â”œâ”€â”€ Matchmaking
â”œâ”€â”€ State Synchronization
â””â”€â”€ Anti-cheat Validation

DATABASE (Firebase)
â”œâ”€â”€ Users Collection
â”œâ”€â”€ Leaderboards Collection
â””â”€â”€ Achievements Collection

DEPLOYMENT
â”œâ”€â”€ Frontend: Vercel/Netlify
â”œâ”€â”€ Backend: Railway/Render
â””â”€â”€ Database: Firebase (free tier)

Free Assets:

Sounds: Web Audio API (synthetic)
Icons: Lucide React (MIT license)
Fonts: Google Fonts
Colors: Tailwind CSS palette